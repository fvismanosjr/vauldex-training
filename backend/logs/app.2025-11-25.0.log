2025-11-25 16:21:21 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-25 16:21:21 INFO  c.e.s.StudentApiApplicationKt - Starting StudentApiApplicationKt using Java 21.0.1 with PID 9346 (/Users/fvismanos/Desktop/training/backend/build/classes/kotlin/main started by fvismanos in /Users/fvismanos/Desktop/training/backend)
2025-11-25 16:21:21 INFO  c.e.s.StudentApiApplicationKt - The following 1 profile is active: "dev"
2025-11-25 16:21:21 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25 16:21:22 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 39 ms. Found 9 JPA repository interfaces.
2025-11-25 16:21:22 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-25 16:21:22 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-25 16:21:22 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-25 16:21:22 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-25 16:21:22 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-25 16:21:22 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 971 ms
2025-11-25 16:21:22 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-25 16:21:22 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1dca62c2
2025-11-25 16:21:22 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-25 16:21:22 INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/studentdb_dev (PostgreSQL 14.19)
2025-11-25 16:21:22 INFO  o.f.core.internal.command.DbValidate - Successfully validated 2 migrations (execution time 00:00.014s)
2025-11-25 16:21:22 INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2025.11.21
2025-11-25 16:21:22 INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-11-25 16:21:22 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25 16:21:22 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-25 16:21:22 INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-25 16:21:22 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25 16:21:22 INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 14.19
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-25 16:21:23 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25 16:21:23 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:21:24 INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25 16:21:24 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-25 16:21:24 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 34ed5dcd-4819-4da5-8e48-d7d1d89961dc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-25 16:21:24 INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-25 16:21:24 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws-chat] in 'stompWebSocketHandlerMapping'
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.AuthController:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.ChatController:
	{[MESSAGE],[/chat/{channel}]}: sendMessage(IncomingMessage,String)
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.DegreeController:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.StudentController:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-25 16:21:24 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:21:24 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]
2025-11-25 16:21:24 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]]
2025-11-25 16:21:24 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:21:24 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:21:24 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-25 16:21:24 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-25 16:21:24 INFO  c.e.s.StudentApiApplicationKt - Started StudentApiApplicationKt in 3.682 seconds (process running for 3.854)
2025-11-25 16:21:27 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25 16:21:27 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-25 16:21:27 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-25 16:21:27 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@4c2ad035
2025-11-25 16:21:27 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:21:27 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=a1af250c-2c14-8671-0965-f868fec3b405, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:21:27 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=a1af250c-2c14-8671-0965-f868fec3b405
2025-11-25 16:21:27 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=a1af250c-2c14-8671-0965-f868fec3b405
2025-11-25 16:21:32 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/123 session=a1af250c-2c14-8671-0965-f868fec3b405 application/json payload={"sender":"me","content":"hello world"}, lookupDestination='/chat/123'
2025-11-25 16:21:32 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2025-11-25 16:21:33 DEBUG o.s.messaging.handler.HandlerMethod - Could not resolve parameter [1] in public com.example.studentapi.controller.OutgoingMessage com.example.studentapi.controller.ChatController.sendMessage(com.example.studentapi.controller.IncomingMessage,java.lang.String): Could not read JSON: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
2025-11-25 16:21:33 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle MessageConversionException
2025-11-25 16:21:33 ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
org.springframework.messaging.converter.MessageConversionException: Could not read JSON: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at org.springframework.messaging.converter.MappingJackson2MessageConverter.convertFromInternal(MappingJackson2MessageConverter.java:258)
	at org.springframework.messaging.converter.AbstractMessageConverter.fromMessage(AbstractMessageConverter.java:183)
	at org.springframework.messaging.converter.CompositeMessageConverter.fromMessage(CompositeMessageConverter.java:70)
	at org.springframework.messaging.handler.annotation.support.PayloadMethodArgumentResolver.resolveArgument(PayloadMethodArgumentResolver.java:144)
	at org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:118)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:147)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:115)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1794)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1568)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)
	at com.fasterxml.jackson.databind.DeserializationContext.extractScalarFromObject(DeserializationContext.java:971)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseString(StdDeserializer.java:1444)
	at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:48)
	at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4971)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3981)
	at org.springframework.messaging.converter.MappingJackson2MessageConverter.convertFromInternal(MappingJackson2MessageConverter.java:244)
	... 15 common frames omitted
2025-11-25 16:22:01 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-25 16:22:01 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:22:01 DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=a1af250c-2c14-8671-0965-f868fec3b405, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:22:01 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in StandardWebSocketSession[id=a1af250c-2c14-8671-0965-f868fec3b405, uri=ws://localhost:8080/ws-chat]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:541)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:529)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.closeInternal(StandardWebSocketSession.java:237)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.close(AbstractWebSocketSession.java:144)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 23 common frames omitted
2025-11-25 16:22:01 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=a1af250c-2c14-8671-0965-f868fec3b405, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:22:01 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a1af250c-2c14-8671-0965-f868fec3b405
2025-11-25 16:22:01 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a1af250c-2c14-8671-0965-f868fec3b405
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:22:01 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-25 16:22:01 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]]
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@6a7eef27]
2025-11-25 16:22:01 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:22:01 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:22:01 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:22:01 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-25 16:22:01 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-25 16:24:17 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-25 16:24:17 INFO  c.e.s.StudentApiApplicationKt - Starting StudentApiApplicationKt using Java 21.0.1 with PID 9419 (/Users/fvismanos/Desktop/training/backend/build/classes/kotlin/main started by fvismanos in /Users/fvismanos/Desktop/training/backend)
2025-11-25 16:24:17 INFO  c.e.s.StudentApiApplicationKt - The following 1 profile is active: "dev"
2025-11-25 16:24:18 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25 16:24:18 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 32 ms. Found 9 JPA repository interfaces.
2025-11-25 16:24:18 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-25 16:24:18 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-25 16:24:18 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-25 16:24:18 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-25 16:24:18 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-25 16:24:18 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 998 ms
2025-11-25 16:24:19 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-25 16:24:19 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1dca62c2
2025-11-25 16:24:19 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-25 16:24:19 INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/studentdb_dev (PostgreSQL 14.19)
2025-11-25 16:24:19 INFO  o.f.core.internal.command.DbValidate - Successfully validated 2 migrations (execution time 00:00.017s)
2025-11-25 16:24:19 INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2025.11.21
2025-11-25 16:24:19 INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-11-25 16:24:19 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25 16:24:19 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-25 16:24:19 INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-25 16:24:19 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25 16:24:19 INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 14.19
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-25 16:24:19 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25 16:24:20 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:24:20 INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25 16:24:20 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-25 16:24:20 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: cf4e877c-d9b1-4843-8527-2a72116bee74

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-25 16:24:20 INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-25 16:24:20 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws-chat] in 'stompWebSocketHandlerMapping'
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.AuthController:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.ChatController:
	{[MESSAGE],[/chat/{channel}]}: sendMessage(IncomingMessage,String)
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.DegreeController:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.StudentController:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-25 16:24:21 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:24:21 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]
2025-11-25 16:24:21 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]]
2025-11-25 16:24:21 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:24:21 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:24:21 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-25 16:24:21 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-25 16:24:21 INFO  c.e.s.StudentApiApplicationKt - Started StudentApiApplicationKt in 3.719 seconds (process running for 3.929)
2025-11-25 16:24:25 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25 16:24:25 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-25 16:24:25 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-25 16:24:25 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@4c2ad035
2025-11-25 16:24:25 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:24:25 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=b9b2dc5c-af11-81db-6e54-baf3100b333e, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:24:25 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=b9b2dc5c-af11-81db-6e54-baf3100b333e
2025-11-25 16:24:25 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=b9b2dc5c-af11-81db-6e54-baf3100b333e
2025-11-25 16:24:28 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=b9b2dc5c-af11-81db-6e54-baf3100b333e, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:24:28 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session b9b2dc5c-af11-81db-6e54-baf3100b333e
2025-11-25 16:24:28 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=b9b2dc5c-af11-81db-6e54-baf3100b333e
2025-11-25 16:24:28 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=b9b2dc5c-af11-81db-6e54-baf3100b333e}], simpSessionId=b9b2dc5c-af11-81db-6e54-baf3100b333e}]
2025-11-25 16:24:29 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@4c2ad035
2025-11-25 16:24:29 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:24:29 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=ba170707-656b-5610-8e0c-f4a6f9fd710e, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:24:29 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=ba170707-656b-5610-8e0c-f4a6f9fd710e
2025-11-25 16:24:29 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=ba170707-656b-5610-8e0c-f4a6f9fd710e
2025-11-25 16:24:34 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/123 session=ba170707-656b-5610-8e0c-f4a6f9fd710e application/json payload={"sender":"me","content":"hello world"}, lookupDestination='/chat/123'
2025-11-25 16:24:34 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2025-11-25 16:24:34 DEBUG o.s.messaging.handler.HandlerMethod - Could not resolve parameter [1] in public com.example.studentapi.controller.OutgoingMessage com.example.studentapi.controller.ChatController.sendMessage(com.example.studentapi.controller.IncomingMessage,java.lang.String): Could not read JSON: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
2025-11-25 16:24:34 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle MessageConversionException
2025-11-25 16:24:34 ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
org.springframework.messaging.converter.MessageConversionException: Could not read JSON: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at org.springframework.messaging.converter.MappingJackson2MessageConverter.convertFromInternal(MappingJackson2MessageConverter.java:258)
	at org.springframework.messaging.converter.AbstractMessageConverter.fromMessage(AbstractMessageConverter.java:183)
	at org.springframework.messaging.converter.CompositeMessageConverter.fromMessage(CompositeMessageConverter.java:70)
	at org.springframework.messaging.handler.annotation.support.PayloadMethodArgumentResolver.resolveArgument(PayloadMethodArgumentResolver.java:144)
	at org.springframework.messaging.handler.invocation.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:118)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:147)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:115)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.lang.String` from Object value (token `JsonToken.START_OBJECT`)
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1]
	at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)
	at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1794)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1568)
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)
	at com.fasterxml.jackson.databind.DeserializationContext.extractScalarFromObject(DeserializationContext.java:971)
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer._parseString(StdDeserializer.java:1444)
	at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:48)
	at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4971)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3981)
	at org.springframework.messaging.converter.MappingJackson2MessageConverter.convertFromInternal(MappingJackson2MessageConverter.java:244)
	... 15 common frames omitted
2025-11-25 16:25:21 INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 18], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-25 16:26:04 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-25 16:26:04 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:26:04 DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=ba170707-656b-5610-8e0c-f4a6f9fd710e, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:26:04 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in StandardWebSocketSession[id=ba170707-656b-5610-8e0c-f4a6f9fd710e, uri=ws://localhost:8080/ws-chat]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:541)
	at org.apache.tomcat.websocket.WsSession.close(WsSession.java:529)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.closeInternal(StandardWebSocketSession.java:237)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.close(AbstractWebSocketSession.java:144)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 23 common frames omitted
2025-11-25 16:26:04 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=ba170707-656b-5610-8e0c-f4a6f9fd710e, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:26:04 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ba170707-656b-5610-8e0c-f4a6f9fd710e
2025-11-25 16:26:04 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ba170707-656b-5610-8e0c-f4a6f9fd710e
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:26:04 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-25 16:26:04 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]]
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@409a164d]
2025-11-25 16:26:04 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:26:04 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:26:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:26:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-25 16:26:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-25 16:31:16 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-25 16:31:16 INFO  c.e.s.StudentApiApplicationKt - Starting StudentApiApplicationKt using Java 21.0.1 with PID 9762 (/Users/fvismanos/Desktop/training/backend/build/classes/kotlin/main started by fvismanos in /Users/fvismanos/Desktop/training/backend)
2025-11-25 16:31:16 INFO  c.e.s.StudentApiApplicationKt - The following 1 profile is active: "dev"
2025-11-25 16:31:16 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-25 16:31:16 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 9 JPA repository interfaces.
2025-11-25 16:31:17 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-25 16:31:17 INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-25 16:31:17 INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-25 16:31:17 INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-25 16:31:17 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-25 16:31:17 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 968 ms
2025-11-25 16:31:17 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-25 16:31:17 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@57b1ec84
2025-11-25 16:31:17 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-25 16:31:17 INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:postgresql://localhost:5432/studentdb_dev (PostgreSQL 14.19)
2025-11-25 16:31:17 INFO  o.f.core.internal.command.DbValidate - Successfully validated 2 migrations (execution time 00:00.015s)
2025-11-25 16:31:17 INFO  o.f.core.internal.command.DbMigrate - Current version of schema "public": 2025.11.21
2025-11-25 16:31:17 INFO  o.f.core.internal.command.DbMigrate - Schema "public" is up to date. No migration necessary.
2025-11-25 16:31:17 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-25 16:31:17 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-25 16:31:17 INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-25 16:31:17 INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-25 16:31:17 INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 14.19
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-25 16:31:18 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-25 16:31:18 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:31:19 INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-25 16:31:19 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-25 16:31:19 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 9292bd2b-6069-470d-8a8c-506fa0093b0a

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-11-25 16:31:19 INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-11-25 16:31:19 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws-chat] in 'stompWebSocketHandlerMapping'
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.AuthController:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.ChatController:
	{[MESSAGE],[/chat/{channel}]}: sendMessage(IncomingMessage,String)
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.DegreeController:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.s.c.StudentController:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.a.OpenApiWebMvcResource:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerWelcomeWebMvc:
	
2025-11-25 16:31:19 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.w.u.SwaggerConfigResource:
	
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:31:19 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]
2025-11-25 16:31:19 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]]
2025-11-25 16:31:19 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:31:19 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:31:19 INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-25 16:31:19 INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-25 16:31:19 INFO  c.e.s.StudentApiApplicationKt - Started StudentApiApplicationKt in 3.627 seconds (process running for 3.809)
2025-11-25 16:31:21 INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-25 16:31:21 INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-25 16:31:21 INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-25 16:31:22 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@68b59e2f
2025-11-25 16:31:22 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:31:22 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=e8b0d90d-0260-456a-3aa8-982dfad0e30f, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:31:22 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=e8b0d90d-0260-456a-3aa8-982dfad0e30f
2025-11-25 16:31:22 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=e8b0d90d-0260-456a-3aa8-982dfad0e30f
2025-11-25 16:31:27 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/123 session=e8b0d90d-0260-456a-3aa8-982dfad0e30f application/json payload={"sender":"me","content":"hello world"}, lookupDestination='/chat/123'
2025-11-25 16:31:27 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2025-11-25 16:31:27 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/channel.123 session=e8b0d90d-0260-456a-3aa8-982dfad0e30f payload={"sender":"me","content":"hello world","timestamp":"2025-11-25T16:31:27.062897"}...(truncated)
2025-11-25 16:31:27 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-11-25 16:32:19 INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 9, active threads = 0, queued tasks = 0, completed tasks = 9], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2025-11-25 16:35:17 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@68b59e2f
2025-11-25 16:35:17 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:35:17 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=a3fab826-45be-7b8b-4a0d-a941598c9640, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:35:17 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=a3fab826-45be-7b8b-4a0d-a941598c9640
2025-11-25 16:35:17 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=a3fab826-45be-7b8b-4a0d-a941598c9640
2025-11-25 16:37:52 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=e8b0d90d-0260-456a-3aa8-982dfad0e30f, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:37:52 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=a3fab826-45be-7b8b-4a0d-a941598c9640, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:37:52 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session a3fab826-45be-7b8b-4a0d-a941598c9640
2025-11-25 16:37:52 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e8b0d90d-0260-456a-3aa8-982dfad0e30f
2025-11-25 16:37:52 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=a3fab826-45be-7b8b-4a0d-a941598c9640
2025-11-25 16:37:52 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=e8b0d90d-0260-456a-3aa8-982dfad0e30f
2025-11-25 16:37:52 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=a3fab826-45be-7b8b-4a0d-a941598c9640}], simpSessionId=a3fab826-45be-7b8b-4a0d-a941598c9640}]
2025-11-25 16:37:52 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=e8b0d90d-0260-456a-3aa8-982dfad0e30f}], simpSessionId=e8b0d90d-0260-456a-3aa8-982dfad0e30f}]
2025-11-25 16:37:52 DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.server.support.WebSocketHttpRequestHandler@68b59e2f
2025-11-25 16:37:52 DEBUG o.s.w.s.s.s.WebSocketHttpRequestHandler - GET /ws-chat
2025-11-25 16:37:52 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New StandardWebSocketSession[id=7b151396-337c-f25e-c78e-56660b077ff3, uri=ws://localhost:8080/ws-chat]
2025-11-25 16:37:52 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT session=7b151396-337c-f25e-c78e-56660b077ff3
2025-11-25 16:37:52 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/channel.123 id=sub-0 session=7b151396-337c-f25e-c78e-56660b077ff3
2025-11-25 16:38:03 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat/123 session=7b151396-337c-f25e-c78e-56660b077ff3 application/json payload={"sender":"","content":"Hello World","type":"text","timestamp":"Tue Nov 25 2025 ...(truncated), lookupDestination='/chat/123'
2025-11-25 16:38:03 DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2025-11-25 16:38:03 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/channel.123 session=7b151396-337c-f25e-c78e-56660b077ff3 payload={"sender":"","content":"Hello World","timestamp":"2025-11-25T16:38:03.008068"}
2025-11-25 16:38:03 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2025-11-25 16:40:49 DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - StandardWebSocketSession[id=7b151396-337c-f25e-c78e-56660b077ff3, uri=ws://localhost:8080/ws-chat] closed with CloseStatus[code=1001, reason=null]
2025-11-25 16:40:49 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 7b151396-337c-f25e-c78e-56660b077ff3
2025-11-25 16:40:49 DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=7b151396-337c-f25e-c78e-56660b077ff3
2025-11-25 16:40:49 DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=7b151396-337c-f25e-c78e-56660b077ff3}], simpSessionId=7b151396-337c-f25e-c78e-56660b077ff3}]
2025-11-25 16:58:26 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-25 16:58:26 INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2025-11-25 16:58:26 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-25 16:58:26 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]]
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5479abd8]
2025-11-25 16:58:26 INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:58:26 DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2025-11-25 16:58:26 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-25 16:58:26 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-25 16:58:26 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
